def mvnHome
def labelname = params.labelname
def build_num
 
 
node ('master') {
    
   stage('Preparation') {
      mvnHome = tool 'maven3'
   }
   stage('Build') {
      // Run the maven build
      if (isUnix()) {
         sh "'${mvnHome}/bin/mvn' clean install"
      } else {
         bat(/"${mvnHome}\bin\mvn" clean install)
      }
   }
    
   stage('Results') {
      //junit '**/target/surefire-reports/TEST-*.xml'
      archive '**/*.jar'
      //p4tag rawLabelDesc: 'Jenkins post-build label.', rawLabelName: labelname
      //build_num = env.BUILD_ID
      //cleanup true
   }  
 
  
}
